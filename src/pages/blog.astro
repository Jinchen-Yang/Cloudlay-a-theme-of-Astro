---
import BaseLayout from '../layouts/BaseLayout.astro';
import PostCard from '../components/PostCard.astro';
import { getSortedBlogPosts } from '../utils/content';

const posts = await getSortedBlogPosts();
---

<BaseLayout title="博客">
  <article>
    <h1>博客文章</h1>
    <p class="subtitle">记录开发心得和学习笔记</p>

    <div class="posts-grid">
      {posts.length === 0 ? (
        <p class="empty-state">暂时还没有文章</p>
      ) : (
        posts.map((post) => (
          <PostCard
            title={post.data.title}
            description={post.data.description}
            slug={post.slug}
            date={post.data.date || post.data.pubDate}
            author={post.data.author}
            tags={post.data.tags}
          />
        ))
      )}
    </div>
  </article>

  <style>
    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      color: var(--color-text-secondary);
      margin-bottom: 2rem;
    }

    .posts-grid {
      display: grid;
      gap: 1.5rem;
    }

    .empty-state {
      color: var(--color-text-muted);
      text-align: center;
      padding: 2rem;
    }
  </style>
</BaseLayout>

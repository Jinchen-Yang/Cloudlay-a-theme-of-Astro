---
import BaseLayout from '../layouts/BaseLayout.astro';
import ItemLink from '../components/ItemLink.astro';
import { getNoteCategories } from '../utils/content';

// è·å–æ‰€æœ‰ç¬”è®°åˆ†ç±»
const categories = await getNoteCategories();

// æ„é€ æ˜¾ç¤ºæ•°æ®
const items = categories.map(cat => ({
  name: cat,
  path: `/${cat}`,
  type: 'folder'
}));
---

<BaseLayout title="å­¦ä¹ ç¬”è®°">
  <article>
    <h1>å­¦ä¹ ç¬”è®°</h1>
    <p class="subtitle">æ•´ç†çš„å­¦ä¹ ç¬”è®°å’ŒçŸ¥è¯†ç‚¹æ±‡æ€»</p>

    <div class="notes-grid">
      {items.length === 0 ? (
        <p class="empty-state">æš‚æ—¶è¿˜æ²¡æœ‰ç¬”è®°</p>
      ) : (
        items.map(item => (
          <ItemLink
            href={`/notes${item.path}`}
            icon={item.type === 'folder' ? 'ğŸ“' : 'ğŸ“„'}
            title={item.name}
          />
        ))
      )}
    </div>
  </article>

  <style>
    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      color: var(--color-text-secondary);
      margin-bottom: 2rem;
    }

    .notes-grid {
      display: grid;
      gap: 1rem;
    }

    .empty-state {
      color: var(--color-text-muted);
      text-align: center;
      padding: 2rem;
    }
  </style>
</BaseLayout>
